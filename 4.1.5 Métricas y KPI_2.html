<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Toolkit - Capa 5: M√©tricas y KPI</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #1a237e, #283593);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }
        
        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .header p {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .back-button {
            position: absolute;
            left: 30px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 8px 15px;
            border-radius: 5px;
            text-decoration: none;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .back-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-50%) scale(1.05);
        }
        
        .content {
            padding: 30px;
            display: grid;
            grid-template-columns: 1fr 700px;
            gap: 30px;
        }
        
        .left-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .dimensions-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }
        
        .dimension-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            border: 3px solid #e0e0e0;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            height: 180px;
            display: flex;
            flex-direction: column;
        }
        
        .dimension-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
        }
        
        .dimension-card:nth-child(1)::before { background: linear-gradient(90deg, #1976D2, #64B5F6); }
        .dimension-card:nth-child(2)::before { background: linear-gradient(90deg, #388E3C, #66BB6A); }
        .dimension-card:nth-child(3)::before { background: linear-gradient(90deg, #D32F2F, #EF5350); }
        .dimension-card:nth-child(4)::before { background: linear-gradient(90deg, #7B1FA2, #AB47BC); }
        .dimension-card:nth-child(5)::before { background: linear-gradient(90deg, #F57C00, #FFA726); }
        .dimension-card:nth-child(6)::before { background: linear-gradient(90deg, #00897B, #26A69A); }
        
        .dimension-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        }
        
        .dimension-card.active {
            border-color: #1976D2;
            background: linear-gradient(135deg, #E3F2FD, #BBDEFB);
            box-shadow: 0 8px 20px rgba(25, 118, 210, 0.3);
        }
        
        .dimension-icon {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .dimension-title {
            font-size: 16px;
            font-weight: bold;
            color: #1a237e;
            margin-bottom: 8px;
        }
        
        .dimension-description {
            font-size: 13px;
            color: #555;
            line-height: 1.4;
        }
        
        .detail-panel {
            background: #f9f9f9;
            border: 3px solid #1976D2;
            border-radius: 12px;
            padding: 25px;
            animation: slideIn 0.3s ease;
            max-height: calc(100vh - 200px);
            overflow-y: auto;
            position: sticky;
            top: 20px;
            min-height: 600px;
        }
        
        .detail-panel.empty {
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: #666;
            font-style: italic;
            border-style: dashed;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .detail-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #1976D2;
        }
        
        .detail-title {
            font-size: 20px;
            color: #1a237e;
            font-weight: bold;
            line-height: 1.3;
        }
        
        .detail-section {
            margin-bottom: 20px;
        }
        
        .detail-section h3 {
            color: #1976D2;
            margin-bottom: 10px;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .detail-section h4 {
            color: #1a237e;
            margin: 15px 0 8px 0;
            font-size: 15px;
        }
        
        .detail-section p {
            line-height: 1.6;
            color: #333;
            margin-bottom: 10px;
        }
        
        .detail-section ul {
            list-style: none;
            padding-left: 0;
        }
        
        .detail-section li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
            line-height: 1.5;
        }
        
        .detail-section li::before {
            content: '‚ñ∏';
            position: absolute;
            left: 0;
            color: #1976D2;
            font-weight: bold;
        }
        
        .metric-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 14px;
        }
        
        .metric-table th, .metric-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        
        .metric-table th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        
        .metric-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .metric-table tr:hover {
            background-color: #f1f1f1;
        }
        
        .level-0 {
            background-color: #ffcccc; /* Rojo */
        }
        
        .level-1 {
            background-color: #ffcc99; /* Naranja */
        }
        
        .level-2 {
            background-color: #ffff99; /* Amarillo */
        }
        
        .level-3 {
            background-color: #ccffcc; /* Verde */
        }
        
        .legend {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin-right: 15px;
            margin-bottom: 5px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            margin-right: 5px;
            border: 1px solid #ddd;
        }
        
        .legend-text {
            font-size: 12px;
        }
        
        @media (max-width: 1200px) {
            .content {
                grid-template-columns: 1fr;
            }
            
            .detail-panel {
                position: relative;
                top: 0;
                max-height: none;
                min-height: 400px;
            }
            
            .dimensions-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <a href="javascript:history.back()" class="back-button">Atr√°s</a>
            <h1>üìä Toolkit - Capa 5: M√©tricas y KPI</h1>
            <p>Sistema integral de m√©tricas e indicadores clave de desempe√±o para medir y monitorear el cumplimiento normativo, gesti√≥n de riesgos y calidad t√©cnica de los sistemas de IA</p>
        </div>
        
        <div class="content">
            <div class="left-panel">
                <div class="dimensions-grid" id="dimensionsGrid">
                    <div class="dimension-card" onclick="showDetail(1)" data-dimension="1">
                        <div class="dimension-icon">‚öñÔ∏è</div>
                        <div class="dimension-title">Cumplimiento Normativo</div>
                        <div class="dimension-description">M√©tricas de ciclo de vida regulatorio</div>
                    </div>
                    
                    <div class="dimension-card" onclick="showDetail(2)" data-dimension="2">
                        <div class="dimension-icon">üõ°Ô∏è</div>
                        <div class="dimension-title">Gesti√≥n de Riesgos</div>
                        <div class="dimension-description">Monitoreo de incidentes y efectividad de controles</div>
                    </div>
                    
                    <div class="dimension-card" onclick="showDetail(3)" data-dimension="3">
                        <div class="dimension-icon">üìà</div>
                        <div class="dimension-title">Calidad de Datos</div>
                        <div class="dimension-description">Confiabilidad de fuentes y representatividad</div>
                    </div>
                    
                    <div class="dimension-card" onclick="showDetail(4)" data-dimension="4">
                        <div class="dimension-icon">‚öôÔ∏è</div>
                        <div class="dimension-title">Desempe√±o T√©cnico</div>
                        <div class="dimension-description">Confiabilidad de modelos y m√©tricas de equidad</div>
                    </div>
                    
                    <div class="dimension-card" onclick="showDetail(5)" data-dimension="5">
                        <div class="dimension-icon">üèõÔ∏è</div>
                        <div class="dimension-title">Impacto P√∫blico</div>
                        <div class="dimension-description">Satisfacci√≥n ciudadana y eficiencia operativa</div>
                    </div>
                    
                    <div class="dimension-card" onclick="showDetail(6)" data-dimension="6">
                        <div class="dimension-icon">üè¢</div>
                        <div class="dimension-title">Madurez Institucional</div>
                        <div class="dimension-description">Sostenibilidad y capacidades de gobernanza</div>
                    </div>
                </div>
            </div>
            
            <div class="detail-panel empty" id="detailPanel">
                <p>üëà Selecciona una dimensi√≥n para ver las m√©tricas y KPI detallados</p>
            </div>
        </div>
    </div>

    <script>
        const metricsDetails = {
            1: {
                title: "Cumplimiento Normativo",
                description: "M√©tricas que verifican el cumplimiento de requisitos normativos del CONPES 4144, Ley 1581 de 2012, circulares de la SIC, y reglas del AI Act aplicables a sistemas de alto riesgo en entidades p√∫blicas.",
                metrics: [
                    {
                        name: "Casos de uso clasificados (100%)",
                        level0: "0-20%",
                        level1: "20-60%",
                        level2: "60-90%",
                        level3: "‚â•90%"
                    },
                    {
                        name: "Sistemas alto riesgo con ARADPIA (100%)",
                        level0: "0-10%",
                        level1: "10-50%",
                        level2: "50-90%",
                        level3: "100%"
                    },
                    {
                        name: "Documentaci√≥n t√©cnica (100% alto riesgo)",
                        level0: "0%",
                        level1: "10-30%",
                        level2: "30-80%",
                        level3: "100% bajo riesgo, ‚â•80%"
                    },
                    {
                        name: "Reuniones Comit√© IA (‚â•90%)",
                        level0: "10-20%",
                        level1: "30-70%",
                        level2: "70-85%",
                        level3: "‚â•90%"
                    },
                    {
                        name: "Cobertura capacitaci√≥n en IA responsable",
                        level0: "<30%",
                        level1: "30-60%",
                        level2: "60-85%",
                        level3: "100% roles clave, ‚â•80% soporte"
                    }
                ]
            },
            2: {
                title: "Gesti√≥n de Riesgos",
                description: "M√©tricas que hacen funcional el proceso de gesti√≥n de riesgos y permiten verificar cuantitativamente si los controles implementados est√°n funcionando.",
                metrics: [
                    {
                        name: "N√∫mero de incidentes de IA por tipolog√≠a",
                        level0: "Creciente",
                        level1: "Fluctuante",
                        level2: "Decreciente algunos tipos",
                        level3: "Decreciente todas las categor√≠as"
                    },
                    {
                        name: "Tiempo medio de respuesta a incidentes",
                        level0: ">72h",
                        level1: "48-72h",
                        level2: "24-72h seg√∫n criticidad",
                        level3: "‚â§24h cr√≠ticos, ‚â§72h altos"
                    },
                    {
                        name: "Tasa de materializaci√≥n de riesgos",
                        level0: ">15%",
                        level1: "10-15%",
                        level2: "5-10%",
                        level3: "<5%"
                    },
                    {
                        name: "Efectividad de controles implementados",
                        level0: "<30%",
                        level1: "30-60%",
                        level2: "60-80%",
                        level3: "‚â•85%"
                    }
                ]
            },
            3: {
                title: "Calidad de Datos",
                description: "M√©tricas que eval√∫an las dimensiones fundamentales del ciclo de vida de datos, reconociendo que la calidad de los datos determina cr√≠ticamente la calidad, equidad y confiabilidad de los sistemas de IA.",
                metrics: [
                    {
                        name: "Completitud de datos",
                        level0: "<80%",
                        level1: "80-90%",
                        level2: "90-95%",
                        level3: "‚â•95%"
                    },
                    {
                        name: "Tasa de detecci√≥n de drift (cambio de datos)",
                        level0: "No existe",
                        level1: "Detecciones espor√°dicas",
                        level2: "Monitoreo programado",
                        level3: "Detecci√≥n autom√°tica en tiempo real"
                    },
                    {
                        name: "Representatividad demogr√°fica de datasets",
                        level0: "No evaluada",
                        level1: "Parcialmente evaluada",
                        level2: "Chi-cuadrado en progreso",
                        level3: "p-valor ‚â•0.05 sin diferencia"
                    },
                    {
                        name: "√çndice de calidad de documentaci√≥n de datos",
                        level0: "<40%",
                        level1: "40-60%",
                        level2: "60-80%",
                        level3: "‚â•80%"
                    }
                ]
            },
            4: {
                title: "Desempe√±o T√©cnico",
                description: "M√©tricas que eval√∫an el rendimiento t√©cnico de los sistemas de IA, asegurando que cumplan con est√°ndares de precisi√≥n, equidad, disponibilidad y velocidad de respuesta apropiados para el contexto del servicio p√∫blico distrital.",
                metrics: [
                    {
                        name: "Precisi√≥n y desempe√±o de modelos",
                        level0: "<70%",
                        level1: "70-78%",
                        level2: "78-85%",
                        level3: "‚â•85%"
                    },
                    {
                        name: "M√©tricas de equidad (Disparate Impact Ratio)",
                        level0: "<0.6",
                        level1: "0.6-0.75",
                        level2: "0.75-0.85",
                        level3: "‚â•0.8"
                    },
                    {
                        name: "Disponibilidad del sistema (uptime)",
                        level0: "<90%",
                        level1: "90-95%",
                        level2: "95-98%",
                        level3: "‚â•99%"
                    },
                    {
                        name: "Tiempo de respuesta de sistemas",
                        level0: ">5 seg",
                        level1: "3-5 segundos",
                        level2: "2-3 segundos",
                        level3: "‚â§2 segundos"
                    }
                ]
            },
            5: {
                title: "Impacto P√∫blico",
                description: "M√©tricas que eval√∫an el valor real que generan los sistemas de IA, respondiendo a la pregunta fundamental: ¬øest√° la IA mejorando efectivamente los servicios p√∫blicos y la experiencia ciudadana de manera medible?",
                metrics: [
                    {
                        name: "Satisfacci√≥n ciudadana (CSAT y NPS)",
                        level0: "<60%",
                        level1: "60-75%",
                        level2: "75-85%",
                        level3: "‚â•80%"
                    },
                    {
                        name: "Eficiencia operativa vs l√≠nea base pre-IA",
                        level0: "Sin cambio",
                        level1: "5-10% mejora",
                        level2: "10-15% mejora",
                        level3: "‚â•20% mejora"
                    },
                    {
                        name: "Volumen de servicio y tasa de resoluci√≥n",
                        level0: "<40%",
                        level1: "40-60%",
                        level2: "60-75%",
                        level3: "‚â•70%"
                    },
                    {
                        name: "Tasa de escalamiento a humano",
                        level0: ">30%",
                        level1: "15-30%",
                        level2: "10-20%",
                        level3: "5-15% (balance √≥ptimo)"
                    },
                    {
                        name: "Equidad de acceso por segmento demogr√°fico",
                        level0: "Exclusi√≥n evidente",
                        level1: "Diferencias por segmento",
                        level2: "Diferencias menores no significativas",
                        level3: "Sin diferencias significativas"
                    }
                ]
            },
            6: {
                title: "Madurez Institucional",
                description: "M√©tricas que eval√∫an qu√© tan desarrolladas est√°n las capacidades de gobernanza de IA dentro de la Secretar√≠a, facilitando la planificaci√≥n estrat√©gica y la asignaci√≥n de recursos a lo largo del tiempo.",
                metrics: [
                    {
                        name: "Nivel de madurez institucional",
                        level0: "Incipiente",
                        level1: "Informal",
                        level2: "Documentado",
                        level3: "Optimizado"
                    },
                    {
                        name: "Cobertura de capacitaci√≥n en roles clave",
                        level0: "<50%",
                        level1: "50-75%",
                        level2: "85-95%",
                        level3: "100%"
                    },
                    {
                        name: "Porcentaje de servicios con IA implementada",
                        level0: "0%",
                        level1: "5-15%",
                        level2: "20-40%",
                        level3: "‚â•60%"
                    },
                    {
                        name: "Relaci√≥n costo-beneficio (ROI)",
                        level0: "<0",
                        level1: "0-1.0",
                        level2: "1.0-1.5",
                        level3: "‚â•1.5-3.0"
                    },
                    {
                        name: "√çndice de sostenibilidad institucional",
                        level0: "<30",
                        level1: "30-50",
                        level2: "50-70",
                        level3: "‚â•70"
                    }
                ]
            }
        };

        function showDetail(dimension) {
            const detail = metricsDetails[dimension];
            const panel = document.getElementById('detailPanel');
            
            panel.classList.remove('empty');
            
            let html = `
                <div class="detail-header">
                    <h2 class="detail-title">${detail.title}</h2>
                </div>
                
                <div class="detail-section">
                    <p>${detail.description}</p>
                </div>
                
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color level-0"></div>
                        <div class="legend-text">NIVEL 0: INCIPIENTE</div>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color level-1"></div>
                        <div class="legend-text">NIVEL 1: INFORMAL</div>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color level-2"></div>
                        <div class="legend-text">NIVEL 2: DOCUMENTADO</div>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color level-3"></div>
                        <div class="legend-text">NIVEL 3: OPTIMIZADO</div>
                    </div>
                </div>
                
                <div class="detail-section">
                    <h3>üìà M√©tricas por Nivel de Madurez</h3>
                    <table class="metric-table">
                        <thead>
                            <tr>
                                <th>KPI / DIMENSI√ìN</th>
                                <th>NIVEL 0: INCIPIENTE</th>
                                <th>NIVEL 1: INFORMAL</th>
                                <th>NIVEL 2: DOCUMENTADO</th>
                                <th>NIVEL 3: OPTIMIZADO</th>
                            </tr>
                        </thead>
                        <tbody>
            `;
            
            detail.metrics.forEach(metric => {
                html += `
                    <tr>
                        <td>${metric.name}</td>
                        <td class="level-0">${metric.level0}</td>
                        <td class="level-1">${metric.level1}</td>
                        <td class="level-2">${metric.level2}</td>
                        <td class="level-3">${metric.level3}</td>
                    </tr>
                `;
            });
            
            html += `
                        </tbody>
                    </table>
                </div>
            `;
            
            panel.innerHTML = html;
            
            // Highlight active dimension
            document.querySelectorAll('.dimension-card').forEach(card => {
                card.classList.remove('active');
            });
            document.querySelector(`[data-dimension="${dimension}"]`).classList.add('active');
        }

        // Funci√≥n para procesar par√°metros de URL
        function getUrlParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // Funci√≥n para mostrar una dimensi√≥n espec√≠fica basada en par√°metros de URL
        function checkUrlParameters() {
            const dimensionParam = getUrlParameter('dimension');
            if (dimensionParam && metricsDetails[dimensionParam]) {
                showDetail(parseInt(dimensionParam));
            }
        }

        // Ejecutar al cargar la p√°gina
        window.addEventListener('DOMContentLoaded', function() {
            checkUrlParameters();
        });
    </script>
</body>
</html>