<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Capa 5: M√©tricas y KPI</title>    
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/metricas-kpi.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <a href="javascript:history.back()" class="back-button">Atr√°s</a>
            <h1>üìä Capa 5: M√©tricas y KPI</h1>
            <p>Sistema integral de m√©tricas e indicadores clave de desempe√±o para medir, monitorear y demostrar el cumplimiento normativo, la gesti√≥n efectiva de riesgos, la calidad t√©cnica y el impacto transformador de los sistemas de inteligencia artificial en el servicio p√∫blico distrital</p>
        </div>
        
        <div class="content">
            <div class="left-panel">
                <div class="dimensions-grid" id="dimensionsGrid">
                    <div class="dimension-card" onclick="showDetail(1)" data-dimension="1">
                        <div class="dimension-icon">‚öñÔ∏è</div>
                        <div class="dimension-title">Cumplimiento Normativo</div>
                        <div class="dimension-description">M√©tricas de ciclo de vida regulatorio y trazabilidad institucional</div>
                    </div>
                    
                    <div class="dimension-card" onclick="showDetail(2)" data-dimension="2">
                        <div class="dimension-icon">üõ°Ô∏è</div>
                        <div class="dimension-title">Gesti√≥n de Riesgos</div>
                        <div class="dimension-description">Monitoreo de incidentes y efectividad de controles</div>
                    </div>
                    
                    <div class="dimension-card" onclick="showDetail(3)" data-dimension="3">
                        <div class="dimension-icon">üìà</div>
                        <div class="dimension-title">Calidad de Datos</div>
                        <div class="dimension-description">Confiabilidad de fuentes y representatividad demogr√°fica</div>
                    </div>
                    
                    <div class="dimension-card" onclick="showDetail(4)" data-dimension="4">
                        <div class="dimension-icon">‚öôÔ∏è</div>
                        <div class="dimension-title">Desempe√±o T√©cnico</div>
                        <div class="dimension-description">Confiabilidad de modelos y m√©tricas de equidad</div>
                    </div>
                    
                    <div class="dimension-card" onclick="showDetail(5)" data-dimension="5">
                        <div class="dimension-icon">üèõÔ∏è</div>
                        <div class="dimension-title">Impacto en Servicio P√∫blico</div>
                        <div class="dimension-description">Satisfacci√≥n ciudadana y eficiencia operativa</div>
                    </div>
                    
                    <div class="dimension-card" onclick="showDetail(6)" data-dimension="6">
                        <div class="dimension-icon">üè¢</div>
                        <div class="dimension-title">Madurez Institucional</div>
                        <div class="dimension-description">Sostenibilidad y capacidades de gobernanza</div>
                    </div>
                </div>
            </div>
            
            <div class="detail-panel empty" id="detailPanel">
                <p>üëà Selecciona una dimensi√≥n para ver las m√©tricas y KPI detallados</p>
            </div>
        </div>
    </div>

    <script>
        const metricsDetails = {
            1: {
                title: "Cumplimiento Normativo",
                description: "M√©tricas que verifican el cumplimiento de requisitos normativos del CONPES 4144, Ley 1581 de 2012, circulares de la SIC, y reglas del AI Act aplicables a sistemas de alto riesgo en entidades p√∫blicas.",
                metrics: [
                    {
                        name: "Porcentaje de casos de uso registrados",
                        description: "Completitud del inventario distrital de sistemas de IA",
                        formula: "(Casos de uso registrados en el Registro Central / Total de casos de uso identificados en operaci√≥n o desarrollo) √ó 100",
                        frequency: "Mensual, con auditor√≠a trimestral de completitud",
                        target: "100%",
                        level0: "<70%",
                        level1: "70-85%",
                        level2: "85-95%",
                        level3: "100%"
                    },
                    {
                        name: "Cobertura de uso del Cat√°logo Distrital de Proveedores Pre-evaluados",
                        description: "Grado de adopci√≥n de instrumentos de eficiencia en procesos de contrataci√≥n",
                        formula: "(N√∫mero de contrataciones que utilizaron proveedores del cat√°logo / Total de contrataciones de sistemas de IA durante el per√≠odo) √ó 100",
                        frequency: "Trimestral, con consolidaci√≥n anual",
                        target: "‚â•70% alto riesgo, ‚â•50% riesgo limitado",
                        level0: "<30%",
                        level1: "30-50%",
                        level2: "50-70%",
                        level3: "‚â•70% alto riesgo, ‚â•50% riesgo limitado"
                    },
                    {
                        name: "Porcentaje de casos de uso con clasificaci√≥n de riesgo documentada",
                        description: "Visibilidad sobre sistemas clasificados seg√∫n marco de riesgos",
                        formula: "(Casos de uso con clasificaci√≥n de riesgo formalizada / Total de casos de uso de IA en operaci√≥n o desarrollo) √ó 100",
                        frequency: "Trimestral, con revisi√≥n completa anual",
                        target: "100%",
                        level0: "<60%",
                        level1: "60-80%",
                        level2: "80-95%",
                        level3: "100%"
                    },
                    {
                        name: "Porcentaje de sistemas de alto riesgo con ARA/DPIA completo",
                        description: "Verificaci√≥n de an√°lisis riguroso de riesgos para sistemas cr√≠ticos",
                        formula: "(Sistemas de alto riesgo con ARA/DPIA realizado seg√∫n plantilla del toolkit / Total de sistemas de alto riesgo) √ó 100",
                        frequency: "Verificaci√≥n continua antes de despliegue, consolidado trimestral",
                        target: "100%",
                        level0: "<50%",
                        level1: "50-75%",
                        level2: "75-95%",
                        level3: "100%"
                    },
                    {
                        name: "Porcentaje de sistemas con documentaci√≥n t√©cnica completa",
                        description: "Capacidad de transparencia y auditabilidad del ecosistema de IA",
                        formula: "(Sistemas con Model Card y Data Sheets actualizados / Total de sistemas en operaci√≥n) √ó 100",
                        frequency: "Semestral",
                        target: "100% alto riesgo, ‚â•80% riesgo limitado",
                        level0: "<30%",
                        level1: "30-60%",
                        level2: "60-80%",
                        level3: "100% alto riesgo, ‚â•80% riesgo limitado"
                    },
                    {
                        name: "Cobertura de capacitaci√≥n obligatoria en IA Responsable y Generativa",
                        description: "Evaluaci√≥n de desarrollo de capacidad institucional para adopci√≥n responsable",
                        formula: "(Funcionarios certificados vigentemente en IA Responsable y/o IA Generativa seg√∫n rol / Total de funcionarios en roles clave + usuarios activos de herramientas GenAI) √ó 100",
                        frequency: "Trimestral, con verificaci√≥n continua integrada a sistemas de autenticaci√≥n",
                        target: "100% roles gobernanza y t√©cnicos, 100% usuarios GenAI, ‚â•80% roles soporte",
                        level0: "<50%",
                        level1: "50-70%",
                        level2: "70-90%",
                        level3: "100% roles cr√≠ticos, ‚â•80% soporte"
                    }
                ]
            },
            2: {
                title: "Gesti√≥n de Riesgos",
                description: "M√©tricas que hacen funcional el proceso de gesti√≥n de riesgos y permiten verificar cuantitativamente si los controles implementados est√°n funcionando.",
                metrics: [
                    {
                        name: "N√∫mero de incidentes de IA por tipolog√≠a",
                        description: "Visibilidad sobre tipos de problemas experimentados por sistemas implementados",
                        formula: "Conteo mensual desagregado por tipo: t√©cnico, privacidad, equidad, seguridad, quejas ciudadanas",
                        frequency: "Registro continuo, reporte consolidado mensual",
                        target: "Tendencia decreciente trimestral",
                        level0: "Creciente",
                        level1: "Fluctuante",
                        level2: "Decreciente algunos tipos",
                        level3: "Decreciente todas las categor√≠as"
                    },
                    {
                        name: "Tiempo medio de respuesta a incidentes",
                        description: "Capacidad de reacci√≥n ante problemas identificados",
                        formula: "Œ£(tiempo desde detecci√≥n hasta resoluci√≥n completa) / N√∫mero total de incidentes procesados",
                        frequency: "Consolidaci√≥n mensual con alertas automatizadas",
                        target: "‚â§24h cr√≠ticos, ‚â§72h alto impacto, ‚â§1 semana medio impacto",
                        level0: ">72h cr√≠ticos",
                        level1: "48-72h cr√≠ticos",
                        level2: "24-48h cr√≠ticos",
                        level3: "‚â§24h cr√≠ticos, ‚â§72h alto impacto"
                    },
                    {
                        name: "Tasa de materializaci√≥n de riesgos",
                        description: "Evaluaci√≥n de profundidad del an√°lisis de riesgos",
                        formula: "(Riesgos que efectivamente se presentaron durante per√≠odo / Total de riesgos identificados en ARADPIA durante per√≠odo anterior) √ó 100",
                        frequency: "Semestral",
                        target: "<5%",
                        level0: ">15%",
                        level1: "10-15%",
                        level2: "5-10%",
                        level3: "<5%"
                    },
                    {
                        name: "Efectividad de controles implementados",
                        description: "Evaluaci√≥n cualitativa fundamentada en evidencia de funcionamiento de controles",
                        formula: "% de controles evaluados como efectivos en auditor√≠a",
                        frequency: "Anual auditor√≠a interna, bianual externa para alto riesgo",
                        target: "‚â•85%",
                        level0: "<50%",
                        level1: "50-70%",
                        level2: "70-85%",
                        level3: "‚â•85%"
                    }
                ]
            },
            3: {
                title: "Calidad de Datos",
                description: "M√©tricas que eval√∫an las dimensiones fundamentales del ciclo de vida de datos, reconociendo que la calidad de los datos determina cr√≠ticamente la calidad, equidad y confiabilidad de los sistemas de IA.",
                metrics: [
                    {
                        name: "Completitud de datos",
                        description: "Porcentaje de registros con valores v√°lidos en campos cr√≠ticos",
                        formula: "(Registros sin valores faltantes en campos cr√≠ticos / Total de registros en dataset) √ó 100",
                        frequency: "Evaluaci√≥n mensual para datasets en uso activo",
                        target: "‚â•95% para campos cr√≠ticos",
                        level0: "<80%",
                        level1: "80-90%",
                        level2: "90-95%",
                        level3: "‚â•95%"
                    },
                    {
                        name: "Tasa de detecci√≥n de drift",
                        description: "Capacidad de identificar cambios en distribuci√≥n de datos o relaci√≥n entre variables",
                        formula: "N√∫mero de casos donde se detect√≥ drift significativo durante monitoreo",
                        frequency: "Semanal alto riesgo, mensual riesgo limitado",
                        target: "Detecci√≥n temprana antes de deterioro severo de desempe√±o",
                        level0: "No existe",
                        level1: "Detecciones espor√°dicas",
                        level2: "Monitoreo programado",
                        level3: "Detecci√≥n autom√°tica en tiempo real"
                    },
                    {
                        name: "Representatividad demogr√°fica",
                        description: "Evaluaci√≥n de si distribuci√≥n de datos refleja adecuadamente poblaci√≥n objetivo",
                        formula: "Test Chi-cuadrado: p-valor ‚â• 0.05 sin diferencia significativa",
                        frequency: "Trimestral o con actualizaci√≥n significativa de datos",
                        target: "p-valor ‚â•0.05 sin diferencia significativa",
                        level0: "No evaluada",
                        level1: "Parcialmente evaluada",
                        level2: "Chi-cuadrado en progreso",
                        level3: "p-valor ‚â•0.05 sin diferencia"
                    },
                    {
                        name: "√çndice de calidad de documentaci√≥n de datos",
                        description: "Evaluaci√≥n de completitud de documentaci√≥n sobre datos utilizados",
                        formula: "Puntuaci√≥n 0-100 basada en checklist comprehensivo de Data Sheets",
                        frequency: "Con cada nuevo conjunto de datos o actualizaci√≥n importante",
                        target: "‚â•80%",
                        level0: "<50%",
                        level1: "50-70%",
                        level2: "70-80%",
                        level3: "‚â•80%"
                    }
                ]
            },
            4: {
                title: "Desempe√±o T√©cnico",
                description: "M√©tricas que eval√∫an el rendimiento t√©cnico de los sistemas de IA, asegurando que cumplan con est√°ndares de precisi√≥n, equidad, disponibilidad y velocidad de respuesta apropiados para el contexto del servicio p√∫blico distrital.",
                metrics: [
                    {
                        name: "Precisi√≥n y desempe√±o de modelos",
                        description: "M√©tricas de precisi√≥n seg√∫n tipo de sistema",
                        formula: "Clasificaci√≥n: Precisi√≥n, Recall, F1-Score, AUC-ROC; Regresi√≥n: MAE, RMSE, R¬≤; Generaci√≥n: BLEU, ROUGE, evaluaci√≥n humana",
                        frequency: "Monitoreo continuo con alertas automatizadas, reporte semanal/mensual",
                        target: "‚â•85% para sistemas cr√≠ticos",
                        level0: "<70%",
                        level1: "70-78%",
                        level2: "78-85%",
                        level3: "‚â•85%"
                    },
                    {
                        name: "M√©tricas de equidad (fairness)",
                        description: "Cuantificaci√≥n del grado de discriminaci√≥n potencial del sistema",
                        formula: "Disparate Impact Ratio: (Tasa resultado positivo grupo protegido)/(Tasa resultado positivo grupo mayoritario); Equal Opportunity Difference: diferencia absoluta en tasas de acierto",
                        frequency: "Semanal o mensual en monitoreo continuo",
                        target: "Disparate Impact ‚â•0.8; Equal Opportunity Difference ‚â§0.1",
                        level0: "Disparate Impact <0.6",
                        level1: "Disparate Impact 0.6-0.75",
                        level2: "Disparate Impact 0.75-0.85",
                        level3: "Disparate Impact ‚â•0.8; Difference ‚â§0.1"
                    },
                    {
                        name: "Disponibilidad del sistema",
                        description: "Tiempo en que el servicio est√° activo (uptime)",
                        formula: "(Tiempo de operaci√≥n efectiva / Tiempo total planificado) √ó 100",
                        frequency: "Monitoreo continuo, reporte consolidado mensual",
                        target: "‚â•99% servicios cr√≠ticos, ‚â•95% no cr√≠ticos",
                        level0: "<90%",
                        level1: "90-95%",
                        level2: "95-98%",
                        level3: "‚â•99% cr√≠ticos, ‚â•95% no cr√≠ticos"
                    },
                    {
                        name: "Tiempo de respuesta de sistemas",
                        description: "Velocidad de respuesta a solicitudes de usuarios",
                        formula: "Percentil 95 del tiempo de respuesta a consultas o inferencias del modelo",
                        frequency: "Monitoreo continuo, reporte semanal",
                        target: "‚â§2 segundos para interacciones ciudadanas directas",
                        level0: ">5 seg",
                        level1: "3-5 segundos",
                        level2: "2-3 segundos",
                        level3: "‚â§2 segundos"
                    }
                ]
            },
            5: {
                title: "Impacto en Servicio P√∫blico",
                description: "M√©tricas que eval√∫an el valor real que generan los sistemas de IA, respondiendo a la pregunta fundamental: ¬øest√° la IA mejorando efectivamente los servicios p√∫blicos y la experiencia ciudadana de manera medible?",
                metrics: [
                    {
                        name: "Satisfacci√≥n ciudadana",
                        description: "Evaluaci√≥n de satisfacci√≥n de ciudadanos con servicios que utilizan IA",
                        formula: "CSAT: % satisfecho/muy satisfecho escala 1-5; NPS: (% promotores - % detractores)",
                        frequency: "Captura continua mediante muestreo estad√≠stico, consolidaci√≥n mensual",
                        target: "‚â•80% satisfecho/muy satisfecho; NPS ‚â•50",
                        level0: "<60%",
                        level1: "60-75%",
                        level2: "75-85%",
                        level3: "‚â•80%"
                    },
                    {
                        name: "Eficiencia operativa",
                        description: "Comparaci√≥n de desempe√±o operativo antes y despu√©s de implementar IA",
                        formula: "(Tiempo post-IA / Tiempo pre-IA - 1) √ó 100 o (Costo post-IA / Costo pre-IA - 1) √ó 100",
                        frequency: "Evaluaci√≥n trimestral",
                        target: "Mejora ‚â•20% respecto a l√≠nea base",
                        level0: "Sin cambio",
                        level1: "5-10% mejora",
                        level2: "10-15% mejora",
                        level3: "‚â•20% mejora"
                    },
                    {
                        name: "Volumen de servicio y tasa de resoluci√≥n",
                        description: "Capacidad de atender transacciones y resolver casos sin intervenci√≥n humana",
                        formula: "N√∫mero transacciones procesadas; (Casos resueltos sin escalamiento a humano / Total casos procesados) √ó 100",
                        frequency: "Consolidaci√≥n mensual",
                        target: "Crecimiento sostenido; tasa resoluci√≥n ‚â•70%",
                        level0: "<40%",
                        level1: "40-60%",
                        level2: "60-75%",
                        level3: "‚â•70%"
                    },
                    {
                        name: "Tasa de escalamiento a humano",
                        description: "Balance entre automatizaci√≥n y supervisi√≥n humana necesaria",
                        formula: "(Casos escalados a revisi√≥n o decisi√≥n humana / Total de casos procesados) √ó 100",
                        frequency: "Consolidaci√≥n semanal/mensual",
                        target: "5-15% seg√∫n criticidad",
                        level0: ">30%",
                        level1: "15-30%",
                        level2: "10-20%",
                        level3: "5-15% (balance √≥ptimo)"
                    },
                    {
                        name: "Equidad de acceso",
                        description: "Evaluaci√≥n de acceso equitativo a servicios por segmentos demogr√°ficos",
                        formula: "An√°lisis desagregado de uso por grupos demogr√°ficos (g√©nero, edad, estrato, localidad)",
                        frequency: "Evaluaci√≥n trimestral",
                        target: "Sin diferencias estad√≠sticamente significativas entre grupos",
                        level0: "Exclusi√≥n evidente",
                        level1: "Diferencias por segmento",
                        level2: "Diferencias menores no significativas",
                        level3: "Sin diferencias significativas"
                    }
                ]
            },
            6: {
                title: "Madurez Institucional",
                description: "M√©tricas que eval√∫an qu√© tan desarrolladas est√°n las capacidades de gobernanza de IA dentro de la Secretar√≠a, facilitando la planificaci√≥n estrat√©gica y la asignaci√≥n de recursos a lo largo del tiempo.",
                metrics: [
                    {
                        name: "Nivel de madurez institucional",
                        description: "Evaluaci√≥n global del nivel de madurez en gobernanza de IA",
                        formula: "0 (Incipiente), 1 (Informal), 2 (Documentado), 3 (Optimizado)",
                        frequency: "Evaluaci√≥n anual con autoevaluaci√≥n y validaci√≥n externa",
                        target: "Avance m√≠nimo de 1 nivel por a√±o",
                        level0: "Incipiente",
                        level1: "Informal",
                        level2: "Documentado",
                        level3: "Optimizado"
                    },
                    {
                        name: "Cobertura de capacitaci√≥n en roles clave",
                        description: "Porcentaje de funcionarios en roles clave capacitados en gobernanza de IA",
                        formula: "(Capacitados roles clave / Total roles clave) √ó 100",
                        frequency: "Semestral",
                        target: "100%",
                        level0: "<50%",
                        level1: "50-75%",
                        level2: "75-95%",
                        level3: "100%"
                    },
                    {
                        name: "Porcentaje de tr√°mites y servicios con IA implementada",
                        description: "M√©trica de transformaci√≥n digital que mide servicios con componentes de IA",
                        formula: "(Servicios con componentes de IA / Total de servicios candidatos identificados en roadmap) √ó 100",
                        frequency: "Evaluaci√≥n semestral",
                        target: "20% a√±o 1, 40% a√±o 2, 60% a√±o 3",
                        level0: "0%",
                        level1: "5-15%",
                        level2: "20-40%",
                        level3: "‚â•60%"
                    },
                    {
                        name: "Relaci√≥n costo-beneficio",
                        description: "Evaluaci√≥n de retorno de inversi√≥n de iniciativas de IA",
                        formula: "(Beneficios tangibles monetarios + valor estimado beneficios intangibles) / (Costos totales de implementaci√≥n 3 a√±os)",
                        frequency: "Evaluaci√≥n anual",
                        target: "ROI ‚â•1.5-3.0",
                        level0: "<0",
                        level1: "0-1.0",
                        level2: "1.0-1.5",
                        level3: "‚â•1.5-3.0"
                    },
                    {
                        name: "√çndice de sostenibilidad institucional",
                        description: "Evaluaci√≥n cualitativa del grado de sostenibilidad de iniciativas de IA",
                        formula: "Evaluaci√≥n 0-100: apropiaci√≥n, continuidad presupuestal, independencia, transferencia, capacidad autosuficiencia en capacitaci√≥n",
                        frequency: "Anual",
                        target: "‚â•70",
                        level0: "<30",
                        level1: "30-50",
                        level2: "50-70",
                        level3: "‚â•70"
                    }
                ]
            }
        };

        function showDetail(dimension) {
            const detail = metricsDetails[dimension];
            const panel = document.getElementById('detailPanel');
            
            panel.classList.remove('empty');
            
            let html = `
                <div class="detail-header">
                    <h2 class="detail-title">${detail.title}</h2>
                </div>
                
                <div class="detail-section">
                    <p>${detail.description}</p>
                </div>
                
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color level-0"></div>
                        <div class="legend-text">NIVEL 0: INCIPIENTE</div>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color level-1"></div>
                        <div class="legend-text">NIVEL 1: INFORMAL</div>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color level-2"></div>
                        <div class="legend-text">NIVEL 2: DOCUMENTADO</div>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color level-3"></div>
                        <div class="legend-text">NIVEL 3: OPTIMIZADO</div>
                    </div>
                </div>
            `;
            
            detail.metrics.forEach(metric => {
                html += `
                    <div class="metric-card">
                        <div class="metric-title">${metric.name}</div>
                        <div class="metric-description">${metric.description}</div>
                        
                        <div class="metric-details">
                            <div class="metric-detail-row">
                                <div class="metric-detail-label">F√≥rmula:</div>
                                <div class="metric-detail-value">${metric.formula}</div>
                            </div>
                            <div class="metric-detail-row">
                                <div class="metric-detail-label">Frecuencia:</div>
                                <div class="metric-detail-value">${metric.frequency}</div>
                            </div>
                            <div class="metric-detail-row">
                                <div class="metric-detail-label">Meta:</div>
                                <div class="metric-detail-value">${metric.target}</div>
                            </div>
                        </div>
                        
                        <div class="maturity-levels">
                            <div class="maturity-level level-0">${metric.level0}</div>
                            <div class="maturity-level level-1">${metric.level1}</div>
                            <div class="maturity-level level-2">${metric.level2}</div>
                            <div class="maturity-level level-3">${metric.level3}</div>
                        </div>
                    </div>
                `;
            });
            
            panel.innerHTML = html;
            
            // Highlight active dimension
            document.querySelectorAll('.dimension-card').forEach(card => {
                card.classList.remove('active');
            });
            document.querySelector(`[data-dimension="${dimension}"]`).classList.add('active');
        }

        // Funci√≥n para procesar par√°metros de URL
        function getUrlParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // Funci√≥n para mostrar una dimensi√≥n espec√≠fica basada en par√°metros de URL
        function checkUrlParameters() {
            const dimensionParam = getUrlParameter('dimension');
            if (dimensionParam && metricsDetails[dimensionParam]) {
                showDetail(parseInt(dimensionParam));
            }
        }

        // Ejecutar al cargar la p√°gina
        window.addEventListener('DOMContentLoaded', function() {
            checkUrlParameters();
        });
    </script>
</body>
</html>